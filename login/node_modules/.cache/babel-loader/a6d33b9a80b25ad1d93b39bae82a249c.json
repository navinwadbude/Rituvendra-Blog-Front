{"ast":null,"code":"var events = require('events');\n\nvar debug = require('debug')('nodemon');\n\nvar util = require('util');\n\nvar Bus = function () {\n  events.EventEmitter.call(this);\n};\n\nutil.inherits(Bus, events.EventEmitter);\nvar bus = new Bus(); // /*\n\nvar collected = {};\nbus.on('newListener', function (event) {\n  debug('bus new listener: %s (%s)', event, bus.listeners(event).length);\n\n  if (!collected[event]) {\n    collected[event] = true;\n    bus.on(event, function () {\n      debug('bus emit: %s', event);\n    });\n  }\n}); // */\n// proxy process messages (if forked) to the bus\n\nprocess.on('message', function (event) {\n  debug('process.message(%s)', event);\n  bus.emit(event);\n});\nvar emit = bus.emit; // if nodemon was spawned via a fork, allow upstream communication\n// via process.send\n\nif (process.send) {\n  bus.emit = function (event, data) {\n    process.send({\n      type: event,\n      data: data\n    });\n    emit.apply(bus, arguments);\n  };\n}\n\nmodule.exports = bus;","map":{"version":3,"names":["events","require","debug","util","Bus","EventEmitter","call","inherits","bus","collected","on","event","listeners","length","process","emit","send","data","type","apply","arguments","module","exports"],"sources":["/home/dell/node_modules/nodemon/lib/utils/bus.js"],"sourcesContent":["var events = require('events');\nvar debug = require('debug')('nodemon');\nvar util = require('util');\n\nvar Bus = function () {\n  events.EventEmitter.call(this);\n};\n\nutil.inherits(Bus, events.EventEmitter);\n\nvar bus = new Bus();\n\n// /*\nvar collected = {};\nbus.on('newListener', function (event) {\n  debug('bus new listener: %s (%s)', event, bus.listeners(event).length);\n  if (!collected[event]) {\n    collected[event] = true;\n    bus.on(event, function () {\n      debug('bus emit: %s', event);\n    });\n  }\n});\n\n// */\n\n// proxy process messages (if forked) to the bus\nprocess.on('message', function (event) {\n  debug('process.message(%s)', event);\n  bus.emit(event);\n});\n\nvar emit = bus.emit;\n\n// if nodemon was spawned via a fork, allow upstream communication\n// via process.send\nif (process.send) {\n  bus.emit = function (event, data) {\n    process.send({ type: event, data: data });\n    emit.apply(bus, arguments);\n  };\n}\n\nmodule.exports = bus;\n"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAAP,CAAiB,SAAjB,CAAZ;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AAEA,IAAIG,GAAG,GAAG,YAAY;EACpBJ,MAAM,CAACK,YAAP,CAAoBC,IAApB,CAAyB,IAAzB;AACD,CAFD;;AAIAH,IAAI,CAACI,QAAL,CAAcH,GAAd,EAAmBJ,MAAM,CAACK,YAA1B;AAEA,IAAIG,GAAG,GAAG,IAAIJ,GAAJ,EAAV,C,CAEA;;AACA,IAAIK,SAAS,GAAG,EAAhB;AACAD,GAAG,CAACE,EAAJ,CAAO,aAAP,EAAsB,UAAUC,KAAV,EAAiB;EACrCT,KAAK,CAAC,2BAAD,EAA8BS,KAA9B,EAAqCH,GAAG,CAACI,SAAJ,CAAcD,KAAd,EAAqBE,MAA1D,CAAL;;EACA,IAAI,CAACJ,SAAS,CAACE,KAAD,CAAd,EAAuB;IACrBF,SAAS,CAACE,KAAD,CAAT,GAAmB,IAAnB;IACAH,GAAG,CAACE,EAAJ,CAAOC,KAAP,EAAc,YAAY;MACxBT,KAAK,CAAC,cAAD,EAAiBS,KAAjB,CAAL;IACD,CAFD;EAGD;AACF,CARD,E,CAUA;AAEA;;AACAG,OAAO,CAACJ,EAAR,CAAW,SAAX,EAAsB,UAAUC,KAAV,EAAiB;EACrCT,KAAK,CAAC,qBAAD,EAAwBS,KAAxB,CAAL;EACAH,GAAG,CAACO,IAAJ,CAASJ,KAAT;AACD,CAHD;AAKA,IAAII,IAAI,GAAGP,GAAG,CAACO,IAAf,C,CAEA;AACA;;AACA,IAAID,OAAO,CAACE,IAAZ,EAAkB;EAChBR,GAAG,CAACO,IAAJ,GAAW,UAAUJ,KAAV,EAAiBM,IAAjB,EAAuB;IAChCH,OAAO,CAACE,IAAR,CAAa;MAAEE,IAAI,EAAEP,KAAR;MAAeM,IAAI,EAAEA;IAArB,CAAb;IACAF,IAAI,CAACI,KAAL,CAAWX,GAAX,EAAgBY,SAAhB;EACD,CAHD;AAID;;AAEDC,MAAM,CAACC,OAAP,GAAiBd,GAAjB"},"metadata":{},"sourceType":"script"}